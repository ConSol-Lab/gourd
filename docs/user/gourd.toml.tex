\documentclass[a4paper,english]{article}
\usepackage{a4wide}
\usepackage{babel}
\usepackage{verbatim}

\usepackage{changepage}

\usepackage[bookmarksopen,bookmarksnumbered]{hyperref}

\usepackage[fancyhdr]{latex2man}



\newcommand{\thecmd}{gourd.toml}
\newcommand{\thecommand}{GOURD.TOML}
\newcommand{\mansection}{1}
\newcommand{\mansectionname}{File Formats Manual}
\newcommand{\mandate}{5 MAY 2024}
\setDate{5 MAY 2024}
\setVersionWord{Version:}
\setVersion{1.29}


\input{latex2man_styling.tex}

\usepackage{mathspec}
\setmainfont[Mapping=tex-text, FakeBold=1]{Linux Libertine O}
\setmathfont(Digits,Greek,Latin)[Numbers=OldStyle, FakeBold=1]{Linux Libertine O}

\begin{document}
	\pagestyle{fancy}

%%@% IF LATEX %@%a
%    \begin{adjustwidth}
%%@% END-IF %@%

  \begin{Name}{5}{gourd.toml}{Test}{File Formats Manual}{Gourd toml}

      \Prog{gourd.toml}, the gourd configuration file.

  \end{Name}

  \section{DESCRIPTION}

      \noindent \Prog{gourd.toml} is a declarative configuration file that, when provided to \Prog{gourd}, can be used to create a new \emph{experiment}.
      The rules for typesetting the file follow the standard toml format.

      \begin{Description}[Files]\setlength{\itemsep}{0cm}
          \item[\File{gourd.toml}] By default, the config file is assumed to be named \texttt{gourd.toml}.
      \end{Description}

  \section{VALUE TYPES}

    \begin{Description}[Types]\setlength{\itemsep}{0cm}
        \item[string] A string of characters surrounded by "".
        \item[path] A file path surrounded by "".
        \item[list of T] A list of values of type T surrounded by [].
    \end{Description}

  \section{GLOBAL CONTEXT}

    These should be put at the beginning of the file before defining any sections.
    Options surrounded by brackets are optional and can be omitted, the default value is show in brackets in the description.

    \begin{Description}[Options]\setlength{\itemsep}{0cm}
        \item[\Opt{output\_path} = path] Where to store the stdout files from the \emph{programs}.
        \item[\Opt{metrics\_path} = path] Where to store the metrics for \texttt{gourd status}.
        \item[\Opt{experiments\_folder} = path] Where to store state of previously ran experiments.
        \item[\oOpt{wrapper} = string] Defines the path to the \texttt{gourd-wrapper} binary. [\texttt{gourd-wrapper}]
    \end{Description}


    \section{SLURM}

      An optional subsection of the config file which can be started with \texttt{[slurm]}.

      \begin{Description}[Options]\setlength{\itemsep}{0cm}
          \item[\Opt{experiment\_name} = string] The SLURM internal experiment name.
          \item[TODO] TODO.
      \end{Description}


    \section{PROGRAMS}

      Multiple programs can be specified. Each one can be started with \texttt{[programs.name]} where \texttt{name} can be any unique name.

      \begin{Description}[Options]\setlength{\itemsep}{0cm}
          \item[\Opt{binary} = path] Path to the program executable.
          \item[\oOpt{arguments} = list of string] Arguments to be passed to the executable. [empty list]
          \item[\oOpt{afterscript} = see afterscript] The configuration for running a short script after program completion.
      \end{Description}

    \section{INPUTS}

      Multiple inputs can be specified. Each one can be started with \texttt{[inputs.name]} where \texttt{name} can be any unique name.
      \textbf{The name cannot contain the string} \texttt{\_glob\_} \textbf{under no circumstances}

      \begin{Description}[Options]\setlength{\itemsep}{0cm}
          \item[\oOpt{input} = path] Path to the file to be piped to the programs inputs. [nothing is piped]
          \item[\oOpt{arguments} = list of string] Arguments to be passed to the executable. [empty list]
            Please see Globs for further explanation.
      \end{Description}


      \subsection{GLOBS}

      If an argument starts with \texttt{=glob=} the rest of the argument will be treated as a glob.
      The input will be instantiated for every combination of glob match.

      \noindent For example consider:

      \begin{verbatim}
[inputs.testrun1]
arguments = ["-f1", "=glob=./inputs/*.in", "-f2", "=glob=./input2/*.in"]
      \end{verbatim}

      \noindent With the folders containing \texttt{input/1.in}, \texttt{input/2.in}, \texttt{input2/test.in}. This yields:

      \begin{verbatim}
[inputs.testrun1_glob_0]
arguments = ["-f1", "./inputs/1.in", "-f2", "./input2/test.in"]

[inputs.testrun1_glob_1]
arguments = ["-f1", "./inputs/2.in", "-f2", "./input2/test.in"]
      \end{verbatim}


  \section{SEE ALSO}
      \Prog{gourd}(1)

  \section{AUTHORS}
    Lukáš Chládek <\Email{l@chla.cz}>\\[0.1cm]\MANbr
    Rūta Giedrytė <\Email{r.giedryte@student.tudelft.nl}>\\[0.1cm]\MANbr
    Andreas Tsatsanis <\Email{a.tsatsanis@student.tudelft.nl}>\\[0.1cm]\MANbr
    Mikołaj Gazeel <\Email{m.j.gazeel@student.tudelft.nl}>\\[0.1cm]\MANbr
    Jan Piotrowski <\Email{j.p.piotrowski@student.tudelft.nl}>

%%@% IF LATEX %@%a
%  \end{adjustwidth}
%%@% END-IF %@%

\end{document}
